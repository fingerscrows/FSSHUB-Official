<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>FSS HUB | GATEWAY</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #8c50ff; --primary-dim: rgba(140, 80, 255, 0.2); --bg: #0f0f14; --card: #191920; --text: #e0e0e0; --text-dim: #888; }
        body { background: var(--bg); color: var(--text); font-family: 'JetBrains Mono', monospace; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; overflow: hidden; }
        body::before { content: ""; position: absolute; width: 200%; height: 200%; background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px); background-size: 40px 40px; opacity: 0.5; z-index: -1; animation: moveGrid 20s linear infinite; }
        @keyframes moveGrid { 0% { transform: translate(0, 0); } 100% { transform: translate(-40px, -40px); } }
        .card { background: var(--card); border: 1px solid #2a2a35; padding: 2.5rem; border-radius: 16px; width: 85%; max-width: 400px; text-align: center; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5); animation: slideUp 0.6s cubic-bezier(0.22, 1, 0.36, 1); position: relative; }
        .card::after { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: var(--primary); box-shadow: 0 0 15px var(--primary); border-radius: 16px 16px 0 0; }
        h1 { color: var(--primary); font-size: 1.8rem; margin: 0 0 5px 0; letter-spacing: -1px; text-shadow: 0 0 20px var(--primary-dim); }
        p { color: var(--text-dim); font-size: 0.85rem; margin: 0 0 25px 0; }
        input { background: #121216; border: 1px solid #333; color: var(--primary); padding: 15px; width: 100%; box-sizing: border-box; text-align: center; font-family: inherit; font-weight: bold; font-size: 1.2rem; border-radius: 8px; outline: none; transition: 0.3s; box-shadow: inset 0 2px 10px rgba(0,0,0,0.3); margin-bottom: 20px; }
        input:focus { border-color: var(--primary); box-shadow: 0 0 15px var(--primary-dim); }
        button { background: var(--primary); color: #fff; border: none; padding: 14px; width: 100%; font-weight: bold; font-family: inherit; font-size: 1rem; border-radius: 8px; cursor: pointer; transition: 0.2s; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 5px 15px rgba(140, 80, 255, 0.3); }
        button:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(140, 80, 255, 0.4); }
        .timer { margin-top: 20px; font-size: 0.75rem; color: #555; }
        .loader { position: fixed; inset: 0; background: var(--bg); display: flex; justify-content: center; align-items: center; z-index: 99; flex-direction: column; }
        .spinner { width: 50px; height: 50px; border: 4px solid #222; border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 15px; box-shadow: 0 0 20px var(--primary-dim); }
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="loader" class="loader">
        <div class="spinner"></div>
        <div style="color:var(--text-dim); font-size:0.8rem; letter-spacing:2px;">SECURE CONNECTION...</div>
    </div>
    
    <div class="card" id="main" style="display:none;">
        <h1>ACCESS GRANTED</h1>
        <p>SESSION ID: <span id="sess" style="color:#fff;">...</span></p>
        <input type="text" id="key" readonly value="GENERATING..." onclick="copy()">
        <button id="btn" onclick="copy()">COPY KEY</button>
        <div class="timer" id="time">Calculating...</div>
    </div>

    <script>
        // === KONFIGURASI ===
        // URL Web App Google Apps Script kamu
        const BASE_API = "https://script.google.com/macros/s/AKfycbw9JrYXbQ-nXZsF75KJRDy1dCgPl0WYDRgk3zwuE5WlYW8P5UrIrb6WyRvxB20HI7D5iQ/exec";
        
        // Token rahasia (Pastikan SAMA dengan yang ada di kode Google Apps Script kamu!)
        const TOKEN = "SAYA_SUKA_FSSHUB_GANTENG"; 
        
        const API_URL = `${BASE_API}?token=${TOKEN}`;

        function copy() {
            const k = document.getElementById("key");
            k.select(); k.setSelectionRange(0,99999);
            document.execCommand("copy");
            const b = document.getElementById("btn");
            const originalText = b.innerText;
            b.innerText = "COPIED!"; b.style.background = "#fff"; b.style.color = "#000";
            setTimeout(() => { b.innerText = originalText; b.style.background = ""; b.style.color = ""; }, 1500);
        }

        async function fetchKey() {
            try {
                const response = await fetch(API_URL);
                const text = await response.text();
                // Cari pola "KEY-XXXX" di respon server
                const match = text.match(/(KEY-[A-F0-9]+)/);
                
                if (match && match[1]) {
                    document.getElementById("key").value = match[1];
                    document.getElementById("loader").style.display = "none";
                    document.getElementById("main").style.display = "block";
                    document.getElementById("sess").innerText = Math.random().toString(36).substr(2, 8).toUpperCase();
                    document.getElementById("time").innerText = "KEY STATUS: ACTIVE & SECURE";
                } else {
                    throw new Error("Invalid response or token.");
                }
            } catch (error) {
                console.error(error);
                document.getElementById("key").value = "ACCESS DENIED";
                document.getElementById("time").innerText = "Security Check Failed. Check Token.";
                document.getElementById("loader").style.display = "none";
                document.getElementById("main").style.display = "block";
            }
        }
        setTimeout(fetchKey, 1500);
    </script>
</body>
</html>
